var BeSocial=(function(e){var c=window.location.href.replace(/(?:#.*)?$/,""),l=(document.getElementsByTagName("HEAD")[0]||document.documentElement),f=null,k=[],h=[],i={},g={};function d(p){var o=document.getElementById("besocial-"+p+"-1");if(o===null){return false}else{k[p]=o;return true}}function b(o){l.removeChild(h[o]);delete h[o];delete k[o]}function j(o,t,r,q){var p=[],s=null;r=r||"=";q=q||"&";for(s in t){if(t[s]){p.push(s.toString()+r+encodeURIComponent(t[s]))}}return o+p.join(q)}function a(p,o){h[p]=document.createElement("script");h[p].charSet="utf-8";h[p].src=o;h[p].async=true;l.appendChild(h[p])}function n(r,p){var q=document.createElement("span"),o=document.createElement("span");q.className="besocial-meta";q.appendChild(document.createTextNode("\u00A0"));o.className="besocial-stat";o.appendChild(document.createTextNode(p));k[r].appendChild(q);k[r].appendChild(o);k[r].target="_blank";b(r)}function m(u,t){var o="";if(t.status==="OK"){var s=k[u].parentNode,r=0,q=0,p=t.data.length;for(;q<p;q++){if(t.data[q].status==="published"||t.data[q].status==="queued"){k[u].href=t.data[q].url;o=parseInt(t.data[q].votes,10)+parseInt(t.data[q].anonymous,10);break}}if(o===""){s.parentNode.removeChild(s)}}else{o=0}return o}i={facebook:function(){var o=[];o.push(c);if(e.twitter_url!==""){o.push(e.twitter_url)}a("facebook",j("http://api.facebook.com/restserver.php?",{v:"1.0",method:"fql.query",query:'select total_count from link_stat where url in("'+o.join('","')+'")',format:"json",callback:"BeSocial.facebook"}))},twitter:function(){a("twitter",j("http://api.tweetmeme.com/url_info.jsonc?",{url:c,callback:"BeSocial.twitter"}))},reddit:function(){a("reddit",j("http://www.reddit.com/api/info.json?",{url:c,jsonp:"BeSocial.reddit"}))},buzz:function(){a("buzz",j("http://www.google.com/buzz/api/buzzThis/buzzCounter?",{url:c,callback:"BeSocial.buzz"}))},delicious:function(){a("delicious",j("http://feeds.delicious.com/v2/json/urlinfo/data?",{url:c,callback:"BeSocial.delicious"}))},bitacoras:function(){a("bitacoras",j("http://api.bitacoras.com/anotacion/",{key:e.bitacoras_apikey,url:c,format:"json",callback:"BeSocial.bitacoras"},"/","/"))},meneame:function(){a("meneame",j("http://www.meneame.net/api/url.php?",{url:c,jsonp:"BeSocial.meneame"}))},divulgame:function(){a("divulgame",j("http://www.divulgame.net/api/url.php?",{url:c,jsonp:"BeSocial.divulgame"}))},divoblogger:function(){a("divoblogger",j("http://divoblogger.com/api/url.php?",{url:c,jsonp:"BeSocial.divoblogger"}))}};g={facebook:function(q){var p=0,o=q.length-1;for(;o>=0;o--){p+=parseInt(q[o].total_count,10)}n("facebook",p)},twitter:function(p){var o=0;if(p.status==="success"){o=p.story.url_count||0}n("twitter",o)},reddit:function(p){var o=0;if(p.data.children.length>0){o=p.data.children[0].data.score}n("reddit",o)},buzz:function(p){var o=0;if(p[c]>0){o=p[c]}n("buzz",o)},delicious:function(p){var o=0;if(p.length>0){o=p[0].total_posts}n("delicious",o)},bitacoras:function(p){var o=p.data.votos||0;n("bitacoras",o)},meneame:function(p){var o=m("meneame",p);if(o!==""){n("meneame",o)}},divulgame:function(p){var o=m("divulgame",p);if(o!==""){n("divulgame",o)}},divoblogger:function(p){var o=m("divoblogger",p);if(o!==""){n("divoblogger",o)}}};for(f in i){if(d(f)){i[f]()}}return g}(BeSocial));